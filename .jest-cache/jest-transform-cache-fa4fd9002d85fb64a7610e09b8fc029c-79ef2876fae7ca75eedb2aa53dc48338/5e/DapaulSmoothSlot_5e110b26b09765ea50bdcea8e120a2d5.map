{"version":3,"names":["DapaulSmoothSlot","constructor","options","spinCost","progressiveJackpot","normalizeNumber","jackpotSeed","progressiveBase","credits","startingCredits","resetState","initialize","getState","generateReels","symbols","reels","i","push","slice","startGame","spin","isSpinning","success","message","lastSpinResult","map","Math","floor","random","length","evaluateSpin","result","winnings","winAmount","state","every","symbol","resetProgressive","Set","size","addToProgressive","filter","amount","value","fallback","Number","isNaN","module","exports"],"sources":["DapaulSmoothSlot.js"],"sourcesContent":["'use strict';\n\n/**\n * Game: Dapaul Smooth Slot\n * High-roller slot experience with smooth jazz mood and progressive jackpots.\n */\n\nclass DapaulSmoothSlot {\n    constructor(options = {}) {\n        this.spinCost = 5;\n        this.progressiveJackpot = this.normalizeNumber(options.jackpotSeed, 500);\n        this.progressiveBase = this.progressiveJackpot;\n        this.credits = this.normalizeNumber(options.startingCredits, 150);\n        this.resetState();\n    }\n\n    initialize(options = {}) {\n        if (typeof options.startingCredits === 'number') {\n            this.credits = this.normalizeNumber(options.startingCredits, this.credits);\n        }\n        if (typeof options.jackpotSeed === 'number') {\n            this.progressiveJackpot = this.normalizeNumber(options.jackpotSeed, this.progressiveJackpot);\n            this.progressiveBase = this.progressiveJackpot;\n        }\n        if (typeof options.spinCost === 'number') {\n            this.spinCost = this.normalizeNumber(options.spinCost, this.spinCost);\n        }\n        this.resetState();\n        return this.getState();\n    }\n\n    generateReels() {\n        const symbols = ['SMOOTH', 'SAX', 'DIAMOND', 'GOLD_STACK', 'VINYL', 'CANE'];\n        const reels = [];\n        for (let i = 0; i < 3; i += 1) {\n            reels.push(symbols.slice());\n        }\n        return reels;\n    }\n\n    startGame() {\n        this.resetState();\n        return this.getState();\n    }\n\n    spin() {\n        if (this.isSpinning || this.credits < this.spinCost) {\n            return { success: false, message: 'Insufficient credits or already spinning.' };\n        }\n        this.isSpinning = true;\n        this.credits -= this.spinCost;\n\n        this.lastSpinResult = this.reels.map((symbols) => symbols[Math.floor(Math.random() * symbols.length)]);\n        this.evaluateSpin();\n        this.isSpinning = false;\n\n        return {\n            success: true,\n            result: this.lastSpinResult.slice(),\n            winnings: this.winAmount,\n            credits: this.credits,\n            state: this.getState()\n        };\n    }\n\n    evaluateSpin() {\n        if (this.lastSpinResult.length === 0) {\n            return;\n        }\n\n        if (this.lastSpinResult.every((symbol) => symbol === 'SMOOTH')) {\n            this.winAmount = this.progressiveJackpot;\n            this.credits += this.winAmount;\n            this.resetProgressive();\n            return;\n        }\n\n        if (new Set(this.lastSpinResult).size === 1) {\n            this.winAmount = 80;\n            this.credits += this.winAmount;\n            this.addToProgressive(10);\n            return;\n        }\n\n        if (this.lastSpinResult.filter((symbol) => symbol === 'DIAMOND').length === 2) {\n            this.winAmount = 25;\n            this.credits += this.winAmount;\n            this.addToProgressive(5);\n            return;\n        }\n\n        this.winAmount = 0;\n        this.addToProgressive(2);\n    }\n\n    addToProgressive(amount) {\n        this.progressiveJackpot += amount;\n    }\n\n    resetProgressive() {\n        this.progressiveJackpot = this.progressiveBase;\n    }\n\n    getState() {\n        return {\n            credits: this.credits,\n            lastSpinResult: this.lastSpinResult.slice(),\n            progressiveJackpot: this.progressiveJackpot,\n            winAmount: this.winAmount,\n            spinCost: this.spinCost\n        };\n    }\n\n    resetState() {\n        this.reels = this.generateReels();\n        this.isSpinning = false;\n        this.lastSpinResult = [];\n        this.winAmount = 0;\n        this.progressiveJackpot = this.progressiveBase;\n    }\n\n    normalizeNumber(value, fallback) {\n        if (typeof value !== 'number' || Number.isNaN(value) || value <= 0) {\n            return fallback;\n        }\n        return Math.floor(value);\n    }\n}\n\nmodule.exports = DapaulSmoothSlot;\n"],"mappings":"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","ignoreList":[]}