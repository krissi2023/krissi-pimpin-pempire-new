{"version":3,"names":["PAYLINES","SYMBOLS","WILD","name","multiplier","GoldBar","CashStack","Cufflink","BadCheck","Diamond","DEFAULT_SYMBOL_WEIGHTS","Object","keys","DiamondsHighRollerHeistSlot","constructor","options","isSpinning","totalWinnings","currentBet","normalizeNumber","defaultBet","playerCredits","startingCredits","lastSpin","reels","payout","winningLines","reelSymbols","map","slice","startGame","value","fallback","Number","isNaN","Math","floor","initialize","setBet","getState","newBet","normalized","spin","success","reason","generateSpinResult","calculateWinnings","animateSpin","credits","state","reelIndex","symbolsPool","column","rowIndex","symbol","random","length","push","lineIndex","line","symbols","reel","row","every","entry","symbolMeta","win","displayName","module","exports"],"sources":["DiamondsHighRollerHeistSlot.js"],"sourcesContent":["'use strict';\n\n/**\n * Diamond's High Roller Heist Slot Machine.\n * Three reels, five paylines, high-volatility payouts, and wild jackpots.\n */\n\nconst PAYLINES = [\n    [[0, 0], [1, 0], [2, 0]],\n    [[0, 1], [1, 1], [2, 1]],\n    [[0, 2], [1, 2], [2, 2]],\n    [[0, 0], [1, 1], [2, 2]],\n    [[0, 2], [1, 1], [2, 0]]\n];\n\nconst SYMBOLS = {\n    WILD: { name: 'Eye of the Pempire', multiplier: 120 },\n    GoldBar: { name: 'Gold Bar Stack', multiplier: 60 },\n    CashStack: { name: 'Cash Stack', multiplier: 30 },\n    Cufflink: { name: 'Platinum Cufflink', multiplier: 12 },\n    BadCheck: { name: 'Bounced Check', multiplier: 6 },\n    Diamond: { name: 'Solo Diamond', multiplier: 4 }\n};\n\nconst DEFAULT_SYMBOL_WEIGHTS = Object.keys(SYMBOLS);\n\nclass DiamondsHighRollerHeistSlot {\n    constructor(options = {}) {\n        this.isSpinning = false;\n        this.totalWinnings = 0;\n        this.currentBet = this.normalizeNumber(options.defaultBet, 10);\n        this.playerCredits = this.normalizeNumber(options.startingCredits, 300);\n        this.lastSpin = { reels: [], payout: { totalWinnings: 0, winningLines: [] } };\n        this.reelSymbols = options.reelSymbols || DEFAULT_SYMBOL_WEIGHTS.map(() => DEFAULT_SYMBOL_WEIGHTS.slice());\n        this.startGame();\n    }\n\n    normalizeNumber(value, fallback) {\n        if (typeof value !== 'number' || Number.isNaN(value) || value <= 0) {\n            return fallback;\n        }\n        return Math.floor(value);\n    }\n\n    initialize(options = {}) {\n        this.playerCredits = this.normalizeNumber(options.startingCredits, this.playerCredits);\n        if (typeof options.defaultBet === 'number') {\n            this.setBet(options.defaultBet);\n        }\n        this.startGame();\n        return this.getState();\n    }\n\n    startGame() {\n        this.isSpinning = false;\n        this.totalWinnings = 0;\n        this.lastSpin = { reels: [], payout: { totalWinnings: 0, winningLines: [] } };\n        return this.getState();\n    }\n\n    setBet(newBet) {\n        const normalized = this.normalizeNumber(newBet, this.currentBet);\n        if (normalized <= this.playerCredits) {\n            this.currentBet = normalized;\n        }\n        return this.currentBet;\n    }\n\n    spin() {\n        if (this.isSpinning) {\n            return { success: false, reason: 'Spin already in progress.' };\n        }\n        if (this.playerCredits < this.currentBet) {\n            return { success: false, reason: 'Insufficient credits.' };\n        }\n\n        this.isSpinning = true;\n        this.playerCredits -= this.currentBet;\n        const reels = this.generateSpinResult();\n        const payout = this.calculateWinnings(reels);\n        this.playerCredits += payout.totalWinnings;\n        this.totalWinnings += payout.totalWinnings;\n        this.lastSpin = { reels, payout };\n        this.isSpinning = false;\n\n        this.animateSpin(reels, payout);\n\n        return {\n            success: true,\n            reels,\n            payout,\n            credits: this.playerCredits,\n            state: this.getState()\n        };\n    }\n\n    generateSpinResult() {\n        const reels = [];\n        for (let reelIndex = 0; reelIndex < 3; reelIndex += 1) {\n            const symbolsPool = this.reelSymbols[reelIndex] || DEFAULT_SYMBOL_WEIGHTS;\n            const column = [];\n            for (let rowIndex = 0; rowIndex < 3; rowIndex += 1) {\n                const symbol = symbolsPool[Math.floor(Math.random() * symbolsPool.length)];\n                column.push(symbol);\n            }\n            reels.push(column);\n        }\n        return reels;\n    }\n\n    calculateWinnings(reels) {\n        let totalWinnings = 0;\n        const winningLines = [];\n\n        for (let lineIndex = 0; lineIndex < PAYLINES.length; lineIndex += 1) {\n            const line = PAYLINES[lineIndex];\n            const symbols = line.map(([reel, row]) => reels[reel][row]);\n            if (symbols.every((entry) => entry === symbols[0])) {\n                const symbolMeta = SYMBOLS[symbols[0]];\n                if (symbolMeta) {\n                    const win = this.currentBet * symbolMeta.multiplier;\n                    totalWinnings += win;\n                    winningLines.push({\n                        line: lineIndex + 1,\n                        symbol: symbols[0],\n                        payout: win,\n                        displayName: symbolMeta.name\n                    });\n                }\n            }\n        }\n\n        return {\n            totalWinnings,\n            winningLines\n        };\n    }\n\n    getState() {\n        return {\n            credits: this.playerCredits,\n            currentBet: this.currentBet,\n            totalWinnings: this.totalWinnings,\n            lastSpin: this.lastSpin\n        };\n    }\n\n    // ==== Animation & UI stubs ====\n    animateSpin(reels, payout) {\n        if (!reels || !payout) {\n            return;\n        }\n        // Hook for client-side animation triggers. No-op for backend simulations.\n    }\n}\n\nmodule.exports = DiamondsHighRollerHeistSlot;"],"mappings":"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","ignoreList":[]}