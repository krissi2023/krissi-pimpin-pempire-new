{"version":3,"names":["BASE_SYMBOLS","JACKPOT_SYMBOL","GoldenCaneSlots","constructor","options","spinCost","normalizeNumber","credits","startingCredits","resetState","initialize","getState","startGame","reels","generateReels","isSpinning","lastSpinResult","winAmount","i","push","slice","spin","success","reason","startSpinAnimation","map","symbols","Math","floor","random","length","evaluateSpin","showSpinResultAnimation","result","winnings","state","every","symbol","showJackpotWin","Set","size","showMinorWin","filter","value","fallback","Number","isNaN","module","exports"],"sources":["GoldenCaneSlots.js"],"sourcesContent":["'use strict';\n\n/**\n * Game: Golden Cane Slots\n * Match luxury symbols for quick-hit wins and flashy jackpots.\n */\n\nconst BASE_SYMBOLS = ['GOLD_MEDAL', 'GOLD_BAR', 'CANE', 'GRAPE_CLUSTER', 'CHERRY', 'BAR'];\nconst JACKPOT_SYMBOL = 'CANE';\n\nclass GoldenCaneSlots {\n    constructor(options = {}) {\n        this.spinCost = this.normalizeNumber(options.spinCost, 4);\n        this.credits = this.normalizeNumber(options.startingCredits, 120);\n        this.resetState();\n    }\n\n    initialize(options = {}) {\n        if (typeof options.startingCredits === 'number') {\n            this.credits = this.normalizeNumber(options.startingCredits, this.credits);\n        }\n        if (typeof options.spinCost === 'number') {\n            this.spinCost = this.normalizeNumber(options.spinCost, this.spinCost);\n        }\n        this.resetState();\n        return this.getState();\n    }\n\n    startGame() {\n        this.resetState();\n        return this.getState();\n    }\n\n    resetState() {\n        this.reels = this.generateReels();\n        this.isSpinning = false;\n        this.lastSpinResult = [];\n        this.winAmount = 0;\n    }\n\n    generateReels() {\n        const reels = [];\n        for (let i = 0; i < 3; i += 1) {\n            reels.push(BASE_SYMBOLS.slice());\n        }\n        return reels;\n    }\n\n    spin() {\n        if (this.isSpinning) {\n            return { success: false, reason: 'Spin already in progress.' };\n        }\n        if (this.credits < this.spinCost) {\n            return { success: false, reason: 'Not enough credits.' };\n        }\n\n        this.isSpinning = true;\n        this.credits -= this.spinCost;\n        this.startSpinAnimation();\n\n        this.lastSpinResult = this.reels.map((symbols) => symbols[Math.floor(Math.random() * symbols.length)]);\n        this.evaluateSpin();\n        this.isSpinning = false;\n        this.showSpinResultAnimation(this.lastSpinResult);\n\n        return {\n            success: true,\n            result: this.lastSpinResult.slice(),\n            winnings: this.winAmount,\n            credits: this.credits,\n            state: this.getState()\n        };\n    }\n\n    evaluateSpin() {\n        if (this.lastSpinResult.length === 0) {\n            this.winAmount = 0;\n            return;\n        }\n\n        if (this.lastSpinResult.every((symbol) => symbol === JACKPOT_SYMBOL)) {\n            this.winAmount = 420;\n            this.credits += this.winAmount;\n            this.showJackpotWin();\n            return;\n        }\n\n        if (new Set(this.lastSpinResult).size === 1) {\n            this.winAmount = 80;\n            this.credits += this.winAmount;\n            this.showMinorWin();\n            return;\n        }\n\n        if (this.lastSpinResult.filter((symbol) => symbol === JACKPOT_SYMBOL).length === 2) {\n            this.winAmount = 35;\n            this.credits += this.winAmount;\n            this.showMinorWin();\n            return;\n        }\n\n        this.winAmount = 0;\n    }\n\n    getState() {\n        return {\n            credits: this.credits,\n            lastSpinResult: this.lastSpinResult.slice(),\n            winAmount: this.winAmount,\n            spinCost: this.spinCost\n        };\n    }\n\n    startSpinAnimation() {\n        // Placeholder for frontend animation integration.\n    }\n\n    showSpinResultAnimation(result) {\n        return result;\n    }\n\n    showMinorWin() {\n        // Hook for celebratory effects on minor wins.\n    }\n\n    showJackpotWin() {\n        // Hook for marquee jackpot celebration.\n    }\n\n    normalizeNumber(value, fallback) {\n        if (typeof value !== 'number' || Number.isNaN(value) || value <= 0) {\n            return fallback;\n        }\n        return Math.floor(value);\n    }\n}\n\nmodule.exports = GoldenCaneSlots;"],"mappings":"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","ignoreList":[]}