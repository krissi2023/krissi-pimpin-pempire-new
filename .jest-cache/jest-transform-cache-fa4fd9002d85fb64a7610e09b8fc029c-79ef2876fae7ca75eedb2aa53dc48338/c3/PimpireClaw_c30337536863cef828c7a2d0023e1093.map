{"version":3,"names":["PimpireClaw","constructor","options","gridWidth","gridHeight","prizeGrid","clawPosition","x","y","energy","score","isRunning","streak","activeTimer","initialize","autoStart","countdownSeconds","startingEnergy","generatePrizeGrid","Math","floor","Number","isInteger","max","startCountdown","success","grid","position","rarityTable","row","rarity","random","length","push","collected","value","getValueForRarity","moveClaw","direction","message","moves","left","right","down","up","action","dropClaw","prize","pickPrize","handleStreakBonus","target","durationSeconds","remaining","clearInterval","setInterval","endRound","dispose","getState","module","exports"],"sources":["PimpireClaw.js"],"sourcesContent":["/**\n * Game: Pimpire Claw\n * Claw machine experienceâ€”position the claw, grab premium prizes, and manage limited energy.\n * Features: Grid-based prizes, claw movement, drop timing, rarity system, streak bonuses.\n */\n\n'use strict';\n\nclass PimpireClaw {\n    constructor(options = {}) {\n        this.gridWidth = options.gridWidth || 5;\n        this.gridHeight = options.gridHeight || 5;\n        this.prizeGrid = [];\n        this.clawPosition = { x: 0, y: 0 };\n        this.energy = options.energy || 5;\n        this.score = 0;\n        this.isRunning = false;\n        this.streak = 0;\n        this.activeTimer = null;\n    }\n\n    initialize(options = {}) {\n        const { autoStart = true, countdownSeconds = 60, startingEnergy } = options;\n\n        this.prizeGrid = this.generatePrizeGrid();\n        this.clawPosition = { x: Math.floor(this.gridWidth / 2), y: 0 };\n        this.energy = Number.isInteger(startingEnergy) ? Math.max(startingEnergy, 1) : Math.max(this.energy, 1);\n        this.score = 0;\n        this.streak = 0;\n        this.isRunning = true;\n\n        if (autoStart) {\n            this.startCountdown(countdownSeconds);\n        }\n\n        return {\n            success: true,\n            grid: this.prizeGrid,\n            position: { ...this.clawPosition },\n            energy: this.energy,\n            autoStart\n        };\n    }\n\n    generatePrizeGrid() {\n        const rarityTable = ['common', 'common', 'common', 'rare', 'legendary'];\n        const grid = [];\n\n        for (let y = 0; y < this.gridHeight; y++) {\n            const row = [];\n            for (let x = 0; x < this.gridWidth; x++) {\n                const rarity = rarityTable[Math.floor(Math.random() * rarityTable.length)];\n                row.push({ rarity, collected: false, value: this.getValueForRarity(rarity) });\n            }\n            grid.push(row);\n        }\n\n        return grid;\n    }\n\n    getValueForRarity(rarity) {\n        switch (rarity) {\n            case 'legendary':\n                return 250;\n            case 'rare':\n                return 100;\n            default:\n                return 25;\n        }\n    }\n\n    moveClaw(direction) {\n        if (!this.isRunning || this.energy <= 0) {\n            return { success: false, message: 'Claw inactive.' };\n        }\n\n        const moves = {\n            left: () => { if (this.clawPosition.x > 0) this.clawPosition.x -= 1; },\n            right: () => { if (this.clawPosition.x < this.gridWidth - 1) this.clawPosition.x += 1; },\n            down: () => { if (this.clawPosition.y < this.gridHeight - 1) this.clawPosition.y += 1; },\n            up: () => { if (this.clawPosition.y > 0) this.clawPosition.y -= 1; }\n        };\n\n        const action = moves[direction];\n        if (action) {\n            action();\n            return { success: true, position: { ...this.clawPosition } };\n        }\n\n        return { success: false, message: 'Invalid move.' };\n    }\n\n    dropClaw() {\n        if (!this.isRunning || this.energy <= 0) {\n            return { success: false, message: 'Claw cannot drop right now.' };\n        }\n\n        this.energy -= 1;\n        const prize = this.pickPrize(this.clawPosition.x, this.clawPosition.y);\n\n        if (prize) {\n            this.score += prize.value;\n            this.streak += 1;\n            this.handleStreakBonus();\n            return { success: true, prize, energy: this.energy, score: this.score };\n        }\n\n        this.streak = 0;\n        return { success: false, message: 'Claw missed!', energy: this.energy };\n    }\n\n    pickPrize(x, y) {\n        const target = this.prizeGrid?.[y]?.[x];\n        if (!target || target.collected) {\n            return null;\n        }\n\n        target.collected = true;\n        return { rarity: target.rarity, value: target.value };\n    }\n\n    handleStreakBonus() {\n        if (this.streak > 0 && this.streak % 3 === 0) {\n            this.score += 75;\n        }\n    }\n\n    startCountdown(durationSeconds = 60) {\n        let remaining = durationSeconds;\n        clearInterval(this.activeTimer);\n        this.activeTimer = setInterval(() => {\n            remaining -= 1;\n            if (remaining <= 0 || this.energy <= 0) {\n                this.endRound();\n            }\n        }, 1000);\n    }\n\n    endRound() {\n        this.isRunning = false;\n        clearInterval(this.activeTimer);\n    }\n\n    dispose() {\n        this.endRound();\n    }\n\n    getState() {\n        return {\n            position: { ...this.clawPosition },\n            energy: this.energy,\n            score: this.score,\n            streak: this.streak,\n            grid: this.prizeGrid,\n            isRunning: this.isRunning\n        };\n    }\n}\n\nmodule.exports = PimpireClaw;"],"mappings":"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","ignoreList":[]}