{"version":3,"names":["MinkSlot","constructor","options","spinCost","normalizeNumber","credits","startingCredits","resetState","initialize","getState","generateReels","symbols","reels","i","push","slice","startGame","spin","isSpinning","success","message","lastSpinResult","map","Math","floor","random","length","evaluateSpin","result","winAmount","state","every","symbol","filter","value","fallback","Number","isNaN","module","exports"],"sources":["MinkSlot.js"],"sourcesContent":["'use strict';\n\n/**\n * Game: Mink Slot\n * Fashion-forward slot experience themed around mink coats and luxury prizes.\n */\n\nclass MinkSlot {\n    constructor(options = {}) {\n        this.spinCost = this.normalizeNumber(options.spinCost, 6);\n        this.credits = this.normalizeNumber(options.startingCredits, 120);\n        this.resetState();\n    }\n\n    initialize(options = {}) {\n        if (typeof options.startingCredits === 'number') {\n            this.credits = this.normalizeNumber(options.startingCredits, this.credits);\n        }\n        if (typeof options.spinCost === 'number') {\n            this.spinCost = this.normalizeNumber(options.spinCost, this.spinCost);\n        }\n        this.resetState();\n        return this.getState();\n    }\n\n    generateReels() {\n        const symbols = ['MINK', 'FUR_COLLAR', 'GOLD_RING', 'PERFUME', 'HAT_PIN', 'BAR'];\n        const reels = [];\n        for (let i = 0; i < 3; i += 1) {\n            reels.push(symbols.slice());\n        }\n        return reels;\n    }\n\n    startGame() {\n        this.resetState();\n        return this.getState();\n    }\n\n    spin() {\n        if (this.isSpinning || this.credits < this.spinCost) {\n            return { success: false, message: 'Cannot spin at this moment.' };\n        }\n\n        this.isSpinning = true;\n        this.credits -= this.spinCost;\n        this.lastSpinResult = this.reels.map((symbols) => symbols[Math.floor(Math.random() * symbols.length)]);\n        this.evaluateSpin();\n        this.isSpinning = false;\n\n        return {\n            success: true,\n            result: this.lastSpinResult.slice(),\n            winAmount: this.winAmount,\n            credits: this.credits,\n            state: this.getState()\n        };\n    }\n\n    evaluateSpin() {\n        if (this.lastSpinResult.length === 0) {\n            return;\n        }\n\n        if (this.lastSpinResult.every((symbol) => symbol === 'MINK')) {\n            this.winAmount = 450;\n            this.credits += this.winAmount;\n            return;\n        }\n\n        if (this.lastSpinResult.filter((symbol) => symbol === 'FUR_COLLAR').length === 2) {\n            this.winAmount = 60;\n            this.credits += this.winAmount;\n            return;\n        }\n\n        this.winAmount = 0;\n    }\n\n    getState() {\n        return {\n            credits: this.credits,\n            lastSpinResult: this.lastSpinResult.slice(),\n            winAmount: this.winAmount,\n            spinCost: this.spinCost\n        };\n    }\n\n    resetState() {\n        this.reels = this.generateReels();\n        this.isSpinning = false;\n        this.lastSpinResult = [];\n        this.winAmount = 0;\n    }\n\n    normalizeNumber(value, fallback) {\n        if (typeof value !== 'number' || Number.isNaN(value) || value <= 0) {\n            return fallback;\n        }\n        return Math.floor(value);\n    }\n}\n\nmodule.exports = MinkSlot;\n"],"mappings":"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","ignoreList":[]}