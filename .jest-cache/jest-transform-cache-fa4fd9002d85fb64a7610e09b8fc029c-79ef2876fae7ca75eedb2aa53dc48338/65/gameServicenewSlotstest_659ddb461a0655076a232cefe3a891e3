221d6d5e0ea4cd0e698ab936acb7594e
'use strict';

const {
  startSession,
  endSession,
  getGameDetails
} = require('../services/gameService');
describe('Cabinet catalog registration', () => {
  const OWNER_ID = 'test-user';
  const NEW_CABINETS = [{
    id: 'diamond-heist-coin-dozer',
    name: 'Diamond Heist Coin Dozer',
    autoStart: false
  }, {
    id: 'pimpire-claw',
    name: 'Pimpire Claw',
    initializeArgs: [{
      autoStart: false,
      startingEnergy: 4
    }],
    autoStart: false
  }, {
    id: 'blackjack',
    name: 'Blackjack',
    initializeArgs: [2],
    autoStart: false
  }, {
    id: 'pempire-property-manager',
    name: 'Pempire Property Manager',
    autoStart: false
  }, {
    id: 'quick-rock-paper-scissors',
    name: 'Rock Paper Scissors (Quick)',
    autoStart: false
  }];
  NEW_CABINETS.forEach(({
    id,
    name,
    initializeArgs = [],
    autoStart
  }) => {
    describe(id, () => {
      it('is present in the catalog', () => {
        const details = getGameDetails(id);
        expect(details).toBeTruthy();
        expect(details.id).toBe(id);
        expect(details.name).toBe(name);
      });
      it('starts a session without throwing', () => {
        const session = startSession(id, {
          ownerId: OWNER_ID,
          initializeArgs,
          autoStart
        });
        expect(session).toBeDefined();
        expect(session.gameId).toBe(id);
        expect(session.ownerId).toBe(String(OWNER_ID));
        endSession(session.sessionId);
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdGFydFNlc3Npb24iLCJlbmRTZXNzaW9uIiwiZ2V0R2FtZURldGFpbHMiLCJyZXF1aXJlIiwiZGVzY3JpYmUiLCJPV05FUl9JRCIsIk5FV19DQUJJTkVUUyIsImlkIiwibmFtZSIsImF1dG9TdGFydCIsImluaXRpYWxpemVBcmdzIiwic3RhcnRpbmdFbmVyZ3kiLCJmb3JFYWNoIiwiaXQiLCJkZXRhaWxzIiwiZXhwZWN0IiwidG9CZVRydXRoeSIsInRvQmUiLCJzZXNzaW9uIiwib3duZXJJZCIsInRvQmVEZWZpbmVkIiwiZ2FtZUlkIiwiU3RyaW5nIiwic2Vzc2lvbklkIl0sInNvdXJjZXMiOlsiZ2FtZVNlcnZpY2UubmV3U2xvdHMudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHtcbiAgc3RhcnRTZXNzaW9uLFxuICBlbmRTZXNzaW9uLFxuICBnZXRHYW1lRGV0YWlsc1xufSA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL2dhbWVTZXJ2aWNlJyk7XG5cbmRlc2NyaWJlKCdDYWJpbmV0IGNhdGFsb2cgcmVnaXN0cmF0aW9uJywgKCkgPT4ge1xuICBjb25zdCBPV05FUl9JRCA9ICd0ZXN0LXVzZXInO1xuICBjb25zdCBORVdfQ0FCSU5FVFMgPSBbXG4gICAgeyBpZDogJ2RpYW1vbmQtaGVpc3QtY29pbi1kb3plcicsIG5hbWU6ICdEaWFtb25kIEhlaXN0IENvaW4gRG96ZXInLCBhdXRvU3RhcnQ6IGZhbHNlIH0sXG4gICAge1xuICAgICAgaWQ6ICdwaW1waXJlLWNsYXcnLFxuICAgICAgbmFtZTogJ1BpbXBpcmUgQ2xhdycsXG4gICAgICBpbml0aWFsaXplQXJnczogW3sgYXV0b1N0YXJ0OiBmYWxzZSwgc3RhcnRpbmdFbmVyZ3k6IDQgfV0sXG4gICAgICBhdXRvU3RhcnQ6IGZhbHNlXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ2JsYWNramFjaycsXG4gICAgICBuYW1lOiAnQmxhY2tqYWNrJyxcbiAgICAgIGluaXRpYWxpemVBcmdzOiBbMl0sXG4gICAgICBhdXRvU3RhcnQ6IGZhbHNlXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3BlbXBpcmUtcHJvcGVydHktbWFuYWdlcicsXG4gICAgICBuYW1lOiAnUGVtcGlyZSBQcm9wZXJ0eSBNYW5hZ2VyJyxcbiAgICAgIGF1dG9TdGFydDogZmFsc2VcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAncXVpY2stcm9jay1wYXBlci1zY2lzc29ycycsXG4gICAgICBuYW1lOiAnUm9jayBQYXBlciBTY2lzc29ycyAoUXVpY2spJyxcbiAgICAgIGF1dG9TdGFydDogZmFsc2VcbiAgICB9XG4gIF07XG5cbiAgTkVXX0NBQklORVRTLmZvckVhY2goKHsgaWQsIG5hbWUsIGluaXRpYWxpemVBcmdzID0gW10sIGF1dG9TdGFydCB9KSA9PiB7XG4gICAgZGVzY3JpYmUoaWQsICgpID0+IHtcbiAgICAgIGl0KCdpcyBwcmVzZW50IGluIHRoZSBjYXRhbG9nJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBkZXRhaWxzID0gZ2V0R2FtZURldGFpbHMoaWQpO1xuICAgICAgICBleHBlY3QoZGV0YWlscykudG9CZVRydXRoeSgpO1xuICAgICAgICBleHBlY3QoZGV0YWlscy5pZCkudG9CZShpZCk7XG4gICAgICAgIGV4cGVjdChkZXRhaWxzLm5hbWUpLnRvQmUobmFtZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3N0YXJ0cyBhIHNlc3Npb24gd2l0aG91dCB0aHJvd2luZycsICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHN0YXJ0U2Vzc2lvbihpZCwge1xuICAgICAgICAgIG93bmVySWQ6IE9XTkVSX0lELFxuICAgICAgICAgIGluaXRpYWxpemVBcmdzLFxuICAgICAgICAgIGF1dG9TdGFydFxuICAgICAgICB9KTtcblxuICAgICAgICBleHBlY3Qoc2Vzc2lvbikudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHNlc3Npb24uZ2FtZUlkKS50b0JlKGlkKTtcbiAgICAgICAgZXhwZWN0KHNlc3Npb24ub3duZXJJZCkudG9CZShTdHJpbmcoT1dORVJfSUQpKTtcbiAgICAgICAgZW5kU2Vzc2lvbihzZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWixNQUFNO0VBQ0pBLFlBQVk7RUFDWkMsVUFBVTtFQUNWQztBQUNGLENBQUMsR0FBR0MsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0FBRXRDQyxRQUFRLENBQUMsOEJBQThCLEVBQUUsTUFBTTtFQUM3QyxNQUFNQyxRQUFRLEdBQUcsV0FBVztFQUM1QixNQUFNQyxZQUFZLEdBQUcsQ0FDbkI7SUFBRUMsRUFBRSxFQUFFLDBCQUEwQjtJQUFFQyxJQUFJLEVBQUUsMEJBQTBCO0lBQUVDLFNBQVMsRUFBRTtFQUFNLENBQUMsRUFDdEY7SUFDRUYsRUFBRSxFQUFFLGNBQWM7SUFDbEJDLElBQUksRUFBRSxjQUFjO0lBQ3BCRSxjQUFjLEVBQUUsQ0FBQztNQUFFRCxTQUFTLEVBQUUsS0FBSztNQUFFRSxjQUFjLEVBQUU7SUFBRSxDQUFDLENBQUM7SUFDekRGLFNBQVMsRUFBRTtFQUNiLENBQUMsRUFDRDtJQUNFRixFQUFFLEVBQUUsV0FBVztJQUNmQyxJQUFJLEVBQUUsV0FBVztJQUNqQkUsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ25CRCxTQUFTLEVBQUU7RUFDYixDQUFDLEVBQ0Q7SUFDRUYsRUFBRSxFQUFFLDBCQUEwQjtJQUM5QkMsSUFBSSxFQUFFLDBCQUEwQjtJQUNoQ0MsU0FBUyxFQUFFO0VBQ2IsQ0FBQyxFQUNEO0lBQ0VGLEVBQUUsRUFBRSwyQkFBMkI7SUFDL0JDLElBQUksRUFBRSw2QkFBNkI7SUFDbkNDLFNBQVMsRUFBRTtFQUNiLENBQUMsQ0FDRjtFQUVESCxZQUFZLENBQUNNLE9BQU8sQ0FBQyxDQUFDO0lBQUVMLEVBQUU7SUFBRUMsSUFBSTtJQUFFRSxjQUFjLEdBQUcsRUFBRTtJQUFFRDtFQUFVLENBQUMsS0FBSztJQUNyRUwsUUFBUSxDQUFDRyxFQUFFLEVBQUUsTUFBTTtNQUNqQk0sRUFBRSxDQUFDLDJCQUEyQixFQUFFLE1BQU07UUFDcEMsTUFBTUMsT0FBTyxHQUFHWixjQUFjLENBQUNLLEVBQUUsQ0FBQztRQUNsQ1EsTUFBTSxDQUFDRCxPQUFPLENBQUMsQ0FBQ0UsVUFBVSxDQUFDLENBQUM7UUFDNUJELE1BQU0sQ0FBQ0QsT0FBTyxDQUFDUCxFQUFFLENBQUMsQ0FBQ1UsSUFBSSxDQUFDVixFQUFFLENBQUM7UUFDM0JRLE1BQU0sQ0FBQ0QsT0FBTyxDQUFDTixJQUFJLENBQUMsQ0FBQ1MsSUFBSSxDQUFDVCxJQUFJLENBQUM7TUFDakMsQ0FBQyxDQUFDO01BRUZLLEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRSxNQUFNO1FBQzVDLE1BQU1LLE9BQU8sR0FBR2xCLFlBQVksQ0FBQ08sRUFBRSxFQUFFO1VBQy9CWSxPQUFPLEVBQUVkLFFBQVE7VUFDakJLLGNBQWM7VUFDZEQ7UUFDRixDQUFDLENBQUM7UUFFRk0sTUFBTSxDQUFDRyxPQUFPLENBQUMsQ0FBQ0UsV0FBVyxDQUFDLENBQUM7UUFDN0JMLE1BQU0sQ0FBQ0csT0FBTyxDQUFDRyxNQUFNLENBQUMsQ0FBQ0osSUFBSSxDQUFDVixFQUFFLENBQUM7UUFDL0JRLE1BQU0sQ0FBQ0csT0FBTyxDQUFDQyxPQUFPLENBQUMsQ0FBQ0YsSUFBSSxDQUFDSyxNQUFNLENBQUNqQixRQUFRLENBQUMsQ0FBQztRQUM5Q0osVUFBVSxDQUFDaUIsT0FBTyxDQUFDSyxTQUFTLENBQUM7TUFDL0IsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119